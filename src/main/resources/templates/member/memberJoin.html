<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout/adminLayout}">
<th:block layout:fragment="title">
    <!-- 각 페이지 마다 변경 -->
    <title>memberJoin</title>
</th:block>
<th:block layout:fragment="css">
    <!-- 각 페이지 마다 변경 -->
    <link rel="stylesheet" th:href="@{/css/member/memberJoin.css}">

</th:block>
<th:block layout:fragment="script">
    <!-- 각 페이지 마다 변경 -->

    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script th:src="@{/js/member/member.js}" defer></script>
    <script th:src="@{/js/member/address.js}" defer></script>
</th:block>
<th:block layout:fragment="adminContainer">
    <div class="adminContainer">
        <div class="memberJoin">
            <div class="memberJoin-con">
                <h1>회원등록</h1>
                <div class="memberJoin1" id="memberJoin1">
                    <form th:action="@{/member/memberJoin}" method="post" th:object="${memberDto}"
                          enctype="multipart/form-data">
                        <ul>
                            <li>
                                <label for="userEmail">이 메 일</label>
                            </li>
                            <li>
                                <input type="email" id="userEmail" th:field="*{userEmail}" placeholder="이 메 일"> <br>
                            </li>
                            <p th:if="${#fields.hasErrors('userEmail')}" th:errors="*{userEmail}" class="error"></p>

                            <li>
                                <label for="userPw">비 밀 번 호</label>
                                <div id="ShowPw" class="ShowPw">
                                    <img th:src="@{/images/eye.png}" alt="이미지대체문구" height="24px">
                                </div>
                            </li>
                            <li>
                                <input type="password" id="userPw" th:field="*{userPw}" placeholder="비 밀 번 호">
                            </li>
                            <p th:if="${#fields.hasErrors('userPw')}" th:errors="*{userPw}" class="error"></p>


                            <li>
                                <label for="memberName">이 름</label>
                            </li>
                            <li>
                                <input type="text" id="memberName" th:field="*{name}" placeholder="이 름"> <br>
                            </li>
                            <p th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="error"></p>


                            <li>
                                <label for="employeeDate">입사일</label>
                            </li>
                            <li>
                                <input type="date" id="employeeDate" th:field="*{employeeDate}">
                            </li>
                            <p th:if="${#fields.hasErrors('employeeDate')}" th:errors="*{employeeDate}"
                               class="error"></p>

                            <li>
                                <label for="role">권한</label>
                            </li>
                            <li>
                                <select name="role" id="role">
                                    <option value="MEMBER">member</option>
                                    <option value="MANAGER">manager</option>
                                    <option value="ADMIN">admin</option>
                                </select>

                            </li>
                            <p th:if="${#fields.hasErrors('role')}" th:errors="*{role}" class="error"></p>

                            <!--<li>
                                <label for="departmentEntity.departmentName">부서</label>
                            </li>
                            <li>
                                <select name="departmentEntity.departmentName" id="departmentEntity.departmentName">
                                    <option value="영업부">영업부</option>
                                    <option value="재무부">재무부</option>
                                    <option value="경영본부">경영본부</option>
                                    <option value="객실본부">객실본부</option>
                                    <option value="운행본부">운행본부</option>
                                    <option value="정비부">정비부</option>
                                </select>

                            </li>
                            <p th:if="${#fields.hasErrors('departmentEntity.departmentName')}"
                               th:errors="*{departmentEntity.departmentName}" class="error"></p>

                            <script>

                                document.getElementById('departmentEntity.departmentName').addEventListener('change', function() {
                                    var selectedDepartment = this.value;
                                    // 선택된 부서에 해당하는 topDepartmentEntity의 값을 설정
                                     if (selectedDepartment === '영업부' || selectedDepartment === '재무부' || selectedDepartment === '경영본부') {
                                        document.getElementById('topDepartmentEntity.topDepartmentName').value = 서비스부;
                                        }else if (selectedDepartment === '객실본부' || selectedDepartment === '운행본부' || selectedDepartment === '정비부') {
                                        document.getElementById('topDepartmentEntity.topDepartmentName').value = 기술부;
                                    }

                            </script>-->
                            <li>
                                <label for="departmentEntity.topDepartmentEntity.topDepartmentName">부서</label>
                            </li>
                            <li>
                                <select onchange="categoryChange(this)" name="departmentEntity.topDepartmentEntity.topDepartmentName" id="departmentEntity.topDepartmentEntity.topDepartmentName">
                                    <option>부서1를 선택하세요</option>
                                    <option value="서비스부">서비스부</option>
                                    <option value="기술부">기술부</option>
                                </select>
                            </li>

                            <select  name="departmentEntity.departmentName" id="departmentEntity.departmentName">
                                <option>부서2</option>
                            </select>
<script>
                            function categoryChange(e) {
                            var good_서비스부 = ["영업부", "재무부", "경영본부"];
                            var good_기술부 = ["객실본부", "운행본부", "정비부"];
                            var target = document.getElementById("departmentEntity.departmentName");

                            if(e.value == "서비스부") var d = good_서비스부;
                            else if(e.value == "기술부") var d = good_기술부;


                            target.options.length = 0;

                            for (x in d) {
                            var opt = document.createElement("option");
                            opt.value = d[x];
                            opt.innerHTML = d[x];
                            target.appendChild(opt);
                            }
                            }
</script>

                            <li>
                                <label for="positionEntity.positionName">직급</label>
                            </li>
                            <li>
                                <select name="positionEntity.positionName" id="positionEntity.positionName">
                                    <option value="사원">사원</option>
                                    <option value="부장">부장</option>
                                    <option value="대표이사">대표이사</option>
                                </select>
                            </li>
                            <p th:if="${#fields.hasErrors('positionEntity.positionName')}" th:errors="*{positionEntity.positionName}"
                               class="error"></p>


                                                        <li>
                                                            <label for="address">주 소</label>
                                                        </li>
                                                        <li>
                                                            <input type="text" id="sample6_postcode" placeholder="우편번호">
                                                            <input type="button" onclick="sample6_execDaumPostcode()" value="우편번호 찾기"><br>
                                                            <input type="text" id="sample6_address" placeholder="주소"><br>
                                                            <input type="text" id="sample6_detailAddress" placeholder="상세주소">
                                                            <input type="hidden" id="address" placeholder="결합된 주소" th:field="*{address}">
                                                        </li>


                                                        <li>
                                                            <label for="phone">전 화 번 호</label>
                                                        </li>
                                                        <li>
                                                            <input type="tel" id="phone" pattern="[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}" maxlength="13"
                                                                   th:field="*{phone}" placeholder="전화번호"> <br>
                                                        </li>


                                                        <li class="file">
                                                            <label for="memberFile">사 진 첨 부</label>
                                                            <input type="file" name="memberFile" id="memberFile">
                                                        </li>

                                                        <li>
                                                            <input type="submit" value="회원등록">
                                                        </li>
                                                    </ul>
                                                </form>
                                            </div>

                                        </div>
                                    </div>


                                </div>
                            </th:block>
                            </html>